const yup = require("yup");

const schema = yup.object().shape({
  vmid: yup.string().trim().matches(/[\w\- ]{1,50}/i).required(),
  result: yup.object().shape({
    status: yup.mixed().oneOf(["SUCCESSFUL", "FAILED"]).required(),
    params: yup.object().shape({
      W: yup.number().required(),
      L: yup.number().required(),
      Ls: yup.number().required(),
      Lm: yup.number().required(),
      Ws: yup.number().required(),
      p: yup.number().required()
    }).required(),
    s11: yup.array().of(yup.array().of(yup.number()).length(2)).required(),
    fitness: yup.number().required()
  }).required(),
  algorithm: yup.object().shape({
    name: yup.string().trim().matches(/[\wğüşıöç( )]{3,}/i).required(),
    config: yup.object().required()
  }).required()
});

const apiResult = {
  "vmid": "VM1 EPatch Instance",
  "result": {
    "status": "SUCCESSFUL",
    "params": {
      "W": 23.737,
      "L": 44.991,
      "Ls": 3.372,
      "Lm": 15.68,
      "Ws": 18.584,
      "p": -12.744
    },
    "s11": [
      [4.5, -0.0223837479188],
      [4.51, -0.0229017966561],
      [4.52, -0.023440552815],
      [4.53, -0.024001087285],
      [4.54, -0.0245845395852],
      [4.55, -0.0251921230683],
      [4.56, -0.0258251305704],
      [4.57, -0.0264849405505],
      [4.58, -0.027173023764],
      [4.59, -0.0278909505226],
      [4.6, -0.0286403985956],
      [4.61, -0.0294231618133],
      [4.62, -0.0302411594424],
      [4.63, -0.0310964464046],
      [4.64, -0.0319912244212],
      [4.65, -0.032927854172],
      [4.66, -0.0339088685666],
      [4.67, -0.0349369872332],
      [4.68, -0.0360151323413],
      [4.69, -0.0371464458842],
      [4.7, -0.0383343085579],
      [4.71, -0.0395823603825],
      [4.72, -0.0408945232256],
      [4.73, -0.0422750253949],
      [4.74, -0.0437284284787],
      [4.75, -0.0452596566224],
      [4.76, -0.0468740284322],
      [4.77, -0.0485772917037],
      [4.78, -0.0503756611685],
      [4.79, -0.0522758594457],
      [4.8, -0.0542851613629],
      [4.81, -0.0564114417843],
      [4.82, -0.0586632270305],
      [4.83, -0.0610497499039],
      [4.84, -0.0635810082279],
      [4.85, -0.0662678266651],
      [4.86, -0.0691219213768],
      [4.87, -0.0721559668203],
      [4.88, -0.07538366362],
      [4.89, -0.0788198059718],
      [4.9, -0.08248034642],
      [4.91, -0.0863824550335],
      [4.92, -0.0905445689668],
      [4.93, -0.0949864270552],
      [4.94, -0.0997290824006],
      [4.95, -0.1047948837833],
      [4.96, -0.1102074140964],
      [4.97, -0.1159913707775],
      [4.98, -0.1221723693251],
      [4.99, -0.1287766464178],
      [5, -0.1358306339159],
      [5.01, -0.1433603692715],
      [5.02, -0.1513907019143],
      [5.03, -0.1599442496214],
      [5.04, -0.1690400547113],
      [5.05, -0.1786918886685],
      [5.06, -0.1889061577748],
      [5.07, -0.1996793745729],
      [5.08, -0.210995184496],
      [5.09, -0.2228209783672],
      [5.1, -0.2351041843639],
      [5.11, -0.2477684208976],
      [5.12, -0.2607098047905],
      [5.13, -0.2737938409962],
      [5.14, -0.2868534549669],
      [5.15, -0.2996888379649],
      [5.16, -0.3120698173059],
      [5.17, -0.3237413874175],
      [5.18, -0.3344327972753],
      [5.19, -0.3438701629798],
      [5.2, -0.3517919865753],
      [5.21, -0.3579663043603],
      [5.22, -0.3622076122022],
      [5.23, -0.364391401808],
      [5.24, -0.3644642369312],
      [5.25, -0.3624478481563],
      [5.26, -0.3584366362765],
      [5.27, -0.3525890320747],
      [5.28, -0.3451140984689],
      [5.29, -0.3362553578716],
      [5.3, -0.3262739796595],
      [5.31, -0.3154332039352],
      [5.32, -0.3039853448518],
      [5.33, -0.2921620840939],
      [5.34, -0.2801681842961],
      [5.35, -0.2681783171396],
      [5.36, -0.2563364426283],
      [5.37, -0.2447570779783],
      [5.38, -0.2335278148205],
      [5.39, -0.2227125346202],
      [5.4, -0.2123548937973],
      [5.41, -0.2024817733482],
      [5.42, -0.1931064962187],
      [5.43, -0.184231702063],
      [5.44, -0.1758518324907],
      [5.45, -0.1679552230117],
      [5.46, -0.1605258246687],
      [5.47, -0.1535445929756],
      [5.48, -0.146990587964],
      [5.49, -0.1408418298381],
      [5.5, -0.1350759521704],
      [5.51, -0.1296706902774],
      [5.52, -0.1246042374362],
      [5.53, -0.1198554965753],
      [5.54, -0.1154042503646],
      [5.55, -0.111231268426],
      [5.56, -0.1073183667498],
      [5.57, -0.1036484313401],
      [5.58, -0.100205415567],
      [5.59, -0.0969743186328],
      [5.6, -0.0939411508801],
      [5.61, -0.0910928903353],
      [5.62, -0.0884174338184],
      [5.63, -0.0859035451141],
      [5.64, -0.083540802052],
      [5.65, -0.0813195438341],
      [5.66, -0.079230819562],
      [5.67, -0.0772663386178],
      [5.68, -0.0754184233266],
      [5.69, -0.0736799641606],
      [5.7, -0.0720443776181],
      [5.71, -0.0705055668188],
      [5.72, -0.0690578847911],
      [5.73, -0.0676961003801],
      [5.74, -0.0664153666735],
      [5.75, -0.0652111918236],
      [5.76, -0.0640794121294],
      [5.77, -0.0630161672408],
      [5.78, -0.0620178773423],
      [5.79, -0.0610812221775],
      [5.8, -0.0602031217814],
      [5.81, -0.0593807187898],
      [5.82, -0.0586113622066],
      [5.83, -0.0578925925119],
      [5.84, -0.0572221280067],
      [5.85, -0.0565978522931],
      [5.86, -0.0560178027994],
      [5.87, -0.0554801602637],
      [5.88, -0.0549832391005],
      [5.89, -0.0545254785764],
      [5.9, -0.0541054347306],
      [5.91, -0.0537217729798],
      [5.92, -0.0533732613537],
      [5.93, -0.05305876431],
      [5.94, -0.0527772370839],
      [5.95, -0.0525277205321],
      [5.96, -0.0523093364314],
      [5.97, -0.0521212832007],
      [5.98, -0.0519628320133],
      [5.99, -0.0518333232733],
      [6, -0.05173216343],
      [6.01, -0.0516588221088],
      [6.02, -0.0516128295372],
      [6.03, -0.0515937742488],
      [6.04, -0.0516013010486],
      [6.05, -0.0516351092252],
      [6.06, -0.0516949509985],
      [6.07, -0.0517806301903],
      [6.08, -0.0518920011096],
      [6.09, -0.0520289676443],
      [6.1, -0.0521914825517],
      [6.11, -0.052379546945],
      [6.12, -0.052593209968],
      [6.13, -0.052832568659],
      [6.14, -0.0530977679987],
      [6.15, -0.0533890011449],
      [6.16, -0.0537065098515],
      [6.17, -0.054050585076],
      [6.18, -0.0544215677777],
      [6.19, -0.0548198499103],
      [6.2, -0.0552458756152],
      [6.21, -0.0557001426222],
      [6.22, -0.0561832038651],
      [6.23, -0.0566956693225],
      [6.24, -0.057238208095],
      [6.25, -0.057811550731],
      [6.26, -0.0584164918158],
      [6.27, -0.0590538928412],
      [6.28, -0.0597246853731],
      [6.29, -0.060429874538],
      [6.3, -0.0611705428529],
      [6.31, -0.0619478544224],
      [6.32, -0.0627630595336],
      [6.33, -0.0636174996803],
      [6.34, -0.0645126130517],
      [6.35, -0.0654499405273],
      [6.36, -0.0664311322187],
      [6.37, -0.067457954612],
      [6.38, -0.0685322983608],
      [6.39, -0.0696561867943],
      [6.4, -0.0708317852063],
      [6.41, -0.0720614110003],
      [6.42, -0.0733475447763],
      [6.43, -0.0746928424507],
      [6.44, -0.0761001485161],
      [6.45, -0.0775725105568],
      [6.46, -0.0791131951499],
      [6.47, -0.0807257053007],
      [6.48, -0.0824137995736],
      [6.49, -0.0841815131047],
      [6.5, -0.086033180702],
      [6.51, -0.0879734622656],
      [6.52, -0.0900073707894],
      [6.53, -0.0921403032411],
      [6.54, -0.0943780746511],
      [6.55, -0.0967269557891],
      [6.56, -0.0991937148531],
      [6.57, -0.1017856636546],
      [6.58, -0.104510708847],
      [6.59, -0.1073774088204],
      [6.6, -0.1103950369706],
      [6.61, -0.113573652149],
      [6.62, -0.1169241772133],
      [6.63, -0.1204584867306],
      [6.64, -0.1241895050339],
      [6.65, -0.1281313160086],
      [6.66, -0.1322992861865],
      [6.67, -0.1367102029582],
      [6.68, -0.1413824299837],
      [6.69, -0.1463360821953],
      [6.7, -0.1515932231469],
      [6.71, -0.1571780878841],
      [6.72, -0.1631173349946],
      [6.73, -0.1694403320581],
      [6.74, -0.1761794793662],
      [6.75, -0.1833705775245],
      [6.76, -0.1910532454129],
      [6.77, -0.1992713959553],
      [6.78, -0.2080737782704],
      [6.79, -0.2175145960321],
      [6.8, -0.2276542132712],
      [6.81, -0.2385599603955],
      [6.82, -0.250307054859],
      [6.83, -0.2629796526322],
      [6.84, -0.2766720483137],
      [6.85, -0.2914900432281],
      [6.86, -0.3075525019085],
      [6.87, -0.3249931175759],
      [6.88, -0.3439624059561],
      [6.89, -0.364629943078],
      [6.9, -0.3871868551264],
      [6.91, -0.4118485548353],
      [6.92, -0.4388576961392],
      [6.93, -0.4684872822234],
      [6.94, -0.5010438050575],
      [6.95, -0.5368702074521],
      [6.96, -0.5763483283744],
      [6.97, -0.6199003006001],
      [6.98, -0.6679880930253],
      [6.99, -0.7211099987203],
      [7, -0.7797923312413],
      [7.01, -0.8445738766703],
      [7.02, -0.9159797485372],
      [7.03, -0.9944802528432],
      [7.04, -1.0804293532688],
      [7.05, -1.173976713934],
      [7.06, -1.274947834658],
      [7.07, -1.3826897469916],
      [7.08, -1.4958869391083],
      [7.09, -1.6123656739366],
      [7.1, -1.7289257091364],
      [7.11, -1.8412641067257],
      [7.12, -1.9440766632305],
      [7.13, -2.0314196600318],
      [7.14, -2.0973654768082],
      [7.15, -2.1368816845663],
      [7.16, -2.1467348009573],
      [7.17, -2.1261405943593],
      [7.18, -2.0769270739057],
      [7.19, -2.0031482327128],
      [7.2, -1.9102948125367],
      [7.21, -1.8043719731804],
      [7.22, -1.6910993897974],
      [7.23, -1.5753787902444],
      [7.24, -1.4610494943665],
      [7.25, -1.3508712126913],
      [7.26, -1.246646368919],
      [7.27, -1.1494041106942],
      [7.28, -1.0595926451124],
      [7.29, -0.977250665993],
      [7.3, -0.9021462738081],
      [7.31, -0.8338823308561],
      [7.32, -0.771972328243],
      [7.33, -0.7158925896124],
      [7.34, -0.6651165861666],
      [7.35, -0.619136308682],
      [7.36, -0.5774746026471],
      [7.37, -0.539691394513],
      [7.38, -0.5053859236136],
      [7.39, -0.4741964632739],
      [7.4, -0.4457985465087]
    ],
    "fitness": -483.85167
  },
  "algorithm": {
    "name": "Göksel",
    "config": {
      "RT": "0.85",
      "C": "2.0",
      "Temp": "5.0",
      "Ns": "20.0",
      "Seed": "1638908193300",
      "Nt": "100.0",
      "Initialpopsize": "100"
    }
  }
}

async function bodySchemaValidate(requestBody) {
  // Not READY
  console.log(apiResult);
  const result = await schema.isValid(apiResult);
  console.log(result);
}


module.exports = bodySchemaValidate;

/*
{
  vmid: _0,
  result: {
    status: on of the FAILED | SUCCESSFUL
    params: {
      W: _20.5,
      L: _30.3,
      Ls: _14.7,
      Lm: _12.1,
      Ws: _13.2,
      p: _-4.2
    },
    s11: [
      _[x1, y1],
      _[x2, y2],
      _[x3, y3],
      _[x4, y4],
      _[x5, y5],
          .
          .
          .
      _[xn, yn]
    ],
    fitness: _123
  },
  algorithm: {
    name: _"EPO"
    config: {
      seed: _1234567,
      arg1: _1,
      arg2: _2,
      arg3: _7
    },
  }
}
*/